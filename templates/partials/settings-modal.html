{{define "settings-modal"}}
<div id="settings-modal" class="modal-overlay" style="display:none" onclick="if(event.target===this)closeSettings()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h2>Settings</h2>
      <button class="close-btn" onclick="closeSettings()" title="Close">&times;</button>
    </div>
    <div class="modal-body">
      <!-- Theme Section -->
      <section class="settings-section">
        <h3 class="section-title">Theme</h3>
        <div class="theme-segmented">
          <button class="theme-segment{{if eq .Settings.Theme "light"}} active{{end}}" onclick="setTheme('light')">â˜€ï¸ Light</button>
          <button class="theme-segment{{if eq .Settings.Theme "dark"}} active{{end}}" onclick="setTheme('dark')">ğŸŒ™ Dark</button>
        </div>
      </section>

      <hr class="section-divider" />

      <!-- Stage Definitions -->
      <section class="settings-section">
        <h3 class="section-title">Stage Definitions</h3>
        <p class="section-description">Customize the names for each practice stage</p>
        <div class="stage-names-list">
          {{range $i, $name := .Settings.StageNames}}
          <div class="stage-name-row">
            <span class="stage-dot" style="background:{{stageColor (add $i 1)}}"></span>
            <span class="stage-label">Stage {{add $i 1}}:</span>
            <input type="text" class="stage-name-input" value="{{$name}}" maxlength="30"
                   data-stage-index="{{$i}}"
                   oninput="onStageNameInput(this)" onblur="onStageNameBlur(this)" />
          </div>
          {{end}}
        </div>
        <button class="reset-defaults-btn" onclick="resetStageNames()">Reset to defaults</button>
      </section>
    </div>
  </div>
</div>
{{end}}
